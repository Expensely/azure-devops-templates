parameters:
  - name: dependsOn
    displayName: Name of job that needs to complete before this job
    type: string
  - name: timeoutInMinutes
    displayName: Number of minutes until this job times out
    type: number
    default: 60
  - name: notifyUsers
    displayName: Users to notify
    type: string

jobs:
  - job: approve
    displayName: Approve
    dependsOn: ${{ parameters.dependsOn }}
    pool: server
    steps:
      - task: ManualValidation@0
        inputs:
          notifyUsers: ${{ parameters.notifyUsers }}
          onTimeout: reject
          instructions: Validate the Terraform plan
        timeoutInMinutes: ${{ parameters.timeoutInMinutes }}
